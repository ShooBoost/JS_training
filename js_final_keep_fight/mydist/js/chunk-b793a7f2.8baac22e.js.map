{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./src/views/Product.vue?1e6a","webpack:///src/views/Product.vue","webpack:///./src/views/Product.vue?880b","webpack:///./src/views/Product.vue"],"names":["$","$find","find","addToUnscopables","arrayMethodUsesToLength","FIND","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_h","$createElement","_c","_self","attrs","isLoading","on","$event","staticClass","_v","_s","productDetail","title","_l","item","key","id","price","unit","origin_price","content","description","changeNowQuantity","nowQuantity","addToCart","buyNow","productsList","slice","imageUrl","staticRenderFns","data","nowProductId","cartList","methods","quantity","$router","push","num","getProductDetails","vm","changeLoadingState","$http","get","url","getProducts","getCartList","nowCartItem","product","console","log","editCart","post","toString","patch","nowMethod","created","$route","params","component"],"mappings":"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","file":"js/chunk-b793a7f2.8baac22e.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('div',{staticClass:\"container pt-5\"},[_c('div',{staticClass:\"row d-none d-md-block mb-5\"},[_c('div',{staticClass:\"col offset-md-1 text-left\"},[_c('router-link',{staticClass:\"w-100 text-decoration-none\",attrs:{\"to\":\"/Products\"}},[_vm._v(\" Products \")]),_vm._v(\" /\"+_vm._s(_vm.productDetail.title)+\" \")],1)])]),_c('section',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col col-4 offset-1\"},_vm._l((_vm.productDetail.imageUrl),function(item){return _c('img',{key:item.id,staticClass:\"w-100 mb-3\",attrs:{\"src\":item,\"alt\":item.title}})}),0),_c('div',{staticClass:\"col col-5 offset-1 position-relative\"},[_c('div',{staticClass:\"d-flex justify-content-start flex-column position-fixed\"},[_c('h2',{staticClass:\"text-left\"},[_vm._v(_vm._s(_vm.productDetail.title))]),_c('p',{staticClass:\"text-left\"},[_vm._v(_vm._s(_vm.productDetail.price)+\"/\"+_vm._s(_vm.productDetail.unit)+\" \"),_c('s',{staticClass:\"ml-5\"},[_vm._v(_vm._s(_vm.productDetail.origin_price)+\"/\"+_vm._s(_vm.productDetail.unit))])]),_c('p',{staticClass:\"text-left\"},[_vm._v(_vm._s(_vm.productDetail.content))]),_c('p',{staticClass:\"text-left mb-8\"},[_vm._v(_vm._s(_vm.productDetail.description))]),_c('p',{staticClass:\"text-left mb-1\",attrs:{\"for\":\"\"}},[_vm._v(\"Quantity\")]),_c('div',{staticClass:\"w-50 btn-group btn-group-sm mb-5\",attrs:{\"role\":\"group\",\"aria-label\":\"\"}},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.changeNowQuantity(-1)}}},[_vm._v(\"-\")]),_c('button',{staticClass:\"px-8 btn btn-outline-primary border-primary\",attrs:{\"type\":\"button\",\"disabled\":\"\"}},[_vm._v(_vm._s(_vm.nowQuantity))]),_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.changeNowQuantity(1)}}},[_vm._v(\"+\")])]),_c('button',{staticClass:\"w-50 btn btn-outline-primary mb-1\",on:{\"click\":function($event){return _vm.addToCart(_vm.productDetail.id, _vm.nowQuantity)}}},[_vm._v(\"Add To Cart\")]),_c('button',{staticClass:\"w-50 btn btn-primary mb-1\",on:{\"click\":function($event){return _vm.buyNow(_vm.productDetail.id, _vm.nowQuantity)}}},[_vm._v(\"Buy Now\")])])])])]),_c('section',{staticClass:\"container\"},[_c('h3',{staticClass:\"mb-5\"},[_vm._v(\"- Popular Collections -\")]),_c('div',{staticClass:\"row\"},_vm._l((_vm.productsList.slice(0, 4)),function(item){return _c('div',{key:item.id,staticClass:\"col col-3\"},[_c('img',{staticClass:\"w-100\",attrs:{\"src\":item.imageUrl[0],\"alt\":item.title}})])}),0)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <loading :active.sync=\"isLoading\"></loading>\n    <!-- 標題 開始 -->\n    <div class=\"container pt-5\">\n      <div class=\"row d-none d-md-block mb-5\">\n        <div class=\"col offset-md-1 text-left\">\n          <router-link class=\"w-100 text-decoration-none\" to=\"/Products\">\n            Products\n          </router-link>\n            /{{productDetail.title}}\n        </div>\n      </div>\n    </div>\n    <!-- 標題 結束 -->\n    <!-- 來不及做 RWD 的 產品明細 開始 -->\n    <section class=\"container\">\n      <div class=\"row\">\n        <!-- 產品圖片放左邊 開始 -->\n        <div class=\"col col-4 offset-1\">\n          <img v-for=\"item in productDetail.imageUrl\"\n              :key=\"item.id\"\n              class=\"w-100 mb-3\"\n              :src=\"item\" :alt=\"item.title\">\n        </div>\n        <!-- 產品圖片放左邊 結束 -->\n        <!-- 希望產品說明文字可以\n              1. 先 position fixed\n              2. 隨著使用者滾動頁面\n              3. 待使用者瀏覽完所有產品圖片後\n              4. 再變 position relative 的固定再該 row 的最下方\n        開始 -->\n        <div class=\"col col-5 offset-1 position-relative\">\n          <div class=\"d-flex justify-content-start flex-column position-fixed\">\n            <h2 class=\"text-left\">{{productDetail.title}}</h2>\n            <p class=\"text-left\">{{productDetail.price}}/{{productDetail.unit}}\n              <s class=\"ml-5\">{{productDetail.origin_price}}/{{productDetail.unit}}</s>\n            </p>\n            <p class=\"text-left\">{{productDetail.content}}</p>\n            <p class=\"text-left mb-8\">{{productDetail.description}}</p>\n            <p class=\"text-left mb-1\" for=\"\">Quantity</p>\n            <div class=\"w-50 btn-group btn-group-sm mb-5\" role=\"group\" aria-label=\"\">\n              <button type=\"button\" class=\"btn btn-outline-primary\"\n                      @click=\"changeNowQuantity(-1)\">-</button>\n              <button type=\"button\" class=\"px-8 btn btn-outline-primary border-primary\" disabled>{{nowQuantity}}</button>\n              <button type=\"button\" class=\"btn btn-outline-primary\"\n                      @click=\"changeNowQuantity(1)\">+</button>\n            </div>\n            <button @click=\"addToCart(productDetail.id, nowQuantity)\" class=\"w-50 btn btn-outline-primary mb-1\">Add To Cart</button>\n            <button @click=\"buyNow(productDetail.id, nowQuantity)\" class=\"w-50 btn btn-primary mb-1\">Buy Now</button>\n          </div>\n        </div>\n        <!-- 希望產品說明文字可以\n              1. 先 position fixed\n              2. 隨著使用者滾動頁面\n              3. 待使用者瀏覽完所有產品圖片後\n              4. 再變 position relative 的固定再該 row 的最下方\n        結束 -->\n      </div>\n    </section>\n    <!-- 來不及做 RWD 的 產品明細 結束 -->\n    <!-- 來不及做 RWD 與 slider 的 更多產品推薦 開始 -->\n    <section class=\"container\">\n      <h3 class=\"mb-5\">- Popular Collections -</h3>\n      <div class=\"row\">\n        <div class=\"col col-3\" v-for=\"item in productsList.slice(0, 4)\" :key=\"item.id\">\n          <img :src=\"item.imageUrl[0]\" :alt=\"item.title\" class=\"w-100\">\n        </div>\n      </div>\n    </section>\n    <!-- 來不及做 RWD 與 slider 的 更多產品推薦 結束 -->\n  </div>\n\n</template>\n<script>\nexport default {\n  data () {\n    return {\n      isLoading: false,\n      productsList: [],\n      nowProductId: '',\n      productDetail: [],\n      nowQuantity: 1,\n      cartList: []\n    }\n  },\n  methods: {\n    // 都會跳轉到 checkout 後，addToCart 的一系列動作才回結束，崩潰\n    // 這樣進到結帳業，購物車也還沒更新啊啊啊啊啊\n    buyNow (nowProductId, quantity) {\n      this.addToCart(nowProductId, quantity)\n      this.$router.push('/checkout')\n    },\n    changeNowQuantity (num) {\n      if (this.nowQuantity + num <= 0) {\n        this.nowQuantity = 0\n      } else {\n        this.nowQuantity += num\n      }\n    },\n    getProductDetails (id = this.nowProductId) {\n      const vm = this\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/product/${id}`\n      vm.changeLoadingState('getProducts')\n      this.$http.get(url)\n        .then(res => {\n          console.log(res)\n          vm.productDetail = res.data.data\n          vm.changeLoadingState('getProducts')\n        })\n        .catch(err => {\n          console.log(err)\n          vm.changeLoadingState('getProducts')\n        })\n    },\n    getProducts (page = 1) {\n      const vm = this\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products`\n      vm.changeLoadingState('getProducts')\n      this.$http.get(url, { page: page })\n        .then(res => {\n          console.log(res)\n          vm.productsList = res.data.data\n          vm.changeLoadingState('getProducts')\n        })\n        .catch(err => {\n          console.log(err)\n          vm.changeLoadingState('getProducts')\n        })\n    },\n\n    getCartList () {\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\n      const vm = this\n      vm.changeLoadingState('getCartList')\n      this.$http.get(url)\n        .then(res => {\n          console.log(res)\n          vm.cartList = res.data.data\n          vm.changeLoadingState('getCartList')\n\n          // 更新購物車資訊，監聽者來自 App.vue 喔喔喔\n          this.$bus.$emit('cartRenew', vm.cartList)\n        })\n        .catch(err => {\n          console.log(err)\n          vm.changeLoadingState('getCartList')\n        })\n    },\n    addToCart (nowProductId = this.nowProductId, quantity = this.nowQuantity) {\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\n      const vm = this\n      var nowCartItem = vm.cartList.find(function (item) {\n        return item.product.id === nowProductId\n      })\n      if (nowCartItem) {\n        console.log('already exists')\n        vm.editCart(nowProductId, nowCartItem.quantity + quantity)\n      } else {\n        console.log(`{\n          product: ${nowProductId},\n          quantity: ${quantity.toString()}\n        }`)\n        this.$http.post(url, {\n          product: nowProductId,\n          quantity: quantity.toString()\n        })\n          .then((res) => {\n            vm.getCartList()\n          })\n          .catch((err) => {\n            console.log(err)\n          })\n      }\n    },\n    editCart (nowProductId, quantity) {\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\n      const vm = this\n      this.$http.patch(url, {\n        product: nowProductId,\n        quantity: quantity.toString()\n      })\n        .then(res => {\n          console.log(res)\n          vm.getCartList()\n        })\n        .catch(err => console.log(err))\n    },\n    changeLoadingState (nowMethod) {\n      this.isLoading = !this.isLoading\n      console.log(nowMethod, this.isLoading)\n    }\n  },\n  created () {\n    console.log(this.$route.params.id)\n    this.nowProductId = this.$route.params.id\n    this.getProductDetails()\n    this.getProducts()\n    this.getCartList()\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=81135a84&\"\nimport script from \"./Product.vue?vue&type=script&lang=js&\"\nexport * from \"./Product.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}